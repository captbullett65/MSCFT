<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>MSCFT v4.2 Generator (Plain Text)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <h1>MSCFT v4.2 Generator (Plain Text)</h1>
  <p>Outputs strict plain text. Unfilled fields become “[Insert]”.</p>

  <form id="form" novalidate>
    <label for="title">Forecast Title</label>
    <input id="title" name="title" type="text">

    <label for="forecaster">Forecaster</label>
    <input id="forecaster" name="forecaster" type="text">

    <label for="question">Forecast Question</label>
    <textarea id="question" name="question" rows="3"></textarea>

    <label for="clarifications">Clarifications</label>
    <textarea id="clarifications" name="clarifications" rows="3"></textarea>

    <label for="sources">Key Sources</label>
    <textarea id="sources" name="sources" rows="3"></textarea>

    <label for="developments">Key Developments</label>
    <textarea id="developments" name="developments" rows="3"></textarea>

    <label for="interpretation">Interpretation</label>
    <textarea id="interpretation" name="interpretation" rows="3"></textarea>

    <label for="inside">Inside View</label>
    <textarea id="inside" name="inside" rows="2"></textarea>

    <label for="outside">Outside View</label>
    <textarea id="outside" name="outside" rows="2"></textarea>

    <label for="anomalies">Data Anomaly &amp; Source Integrity Log</label>
    <textarea id="anomalies" name="anomalies" rows="2"></textarea>

    <label for="yespct">Yes % (binary)</label>
    <input id="yespct" name="yespct" type="number" min="0" max="100" step="1" aria-describedby="pcthelp">

    <label for="nopct">No % (binary)</label>
    <input id="nopct" name="nopct" type="number" min="0" max="100" step="1" aria-describedby="pcthelp">

    <small id="pcthelp">Enter integers 0–100. Values are clamped automatically.</small>

    <div>
      <button type="button" id="gen">Generate</button>
      <button type="button" id="copy">Copy to Clipboard</button>
      <button type="button" id="download">Download .txt</button>
      <button type="reset">Clear</button>
    </div>
  </form>

  <label for="output">Output (plain text)</label>
  <textarea id="output" readonly rows="28" aria-label="MSCFT output"></textarea>

<script>
(function(){
  function $(id){ return document.getElementById(id); }
  function blank(v){ return (v && v.trim().length) ? v.trim() : "[Insert]"; }
  function pct(v){ return (v && v.toString().trim().length) ? v.toString().trim() : "  "; }

  // Universal clamp + digits-only enforcement for older browsers
  function clampPercentInput(el){
    el.addEventListener('input', function(){
      var v = this.value.replace(/\D+/g, '');
      if (v !== '') {
        var n = parseInt(v,10);
        if (isNaN(n)) n = '';
        else {
          if (n < 0) n = 0;
          if (n > 100) n = 100;
        }
        this.value = (n === '' ? '' : String(n));
      } else {
        this.value = '';
      }
    });
  }
  clampPercentInput($('yespct'));
  clampPercentInput($('nopct'));

  function build(){
    const title  = $('title').value;
    const fore   = $('forecaster').value;
    const q      = $('question').value;
    const clar   = $('clarifications').value;
    const src    = $('sources').value;
    const dev    = $('developments').value;
    const interp = $('interpretation').value;
    const inside = $('inside').value;
    const outside= $('outside').value;
    const anom   = $('anomalies').value;
    const yesp   = $('yespct').value;
    const nop    = $('nopct').value;

    let warn = "";
    if (yesp && nop){
      const sum = parseInt(yesp,10) + parseInt(nop,10);
      if (sum !== 100) warn = "NOTE: Yes% + No% = " + sum + " (should be 100). Adjust before publishing.\n\n";
    }

    const txt = warn +
"MSCFT Template Version 4.2 SWARM nodes and BIN Integrated —\n" +
"Node D for Interpretation; Node E for Time Series Modeling;\n" +
"Node F for Retrieval-Augmented Generation (RAG) Added\n" +
"Nodes A, B, B.1, B.2, B.3, C, D, D.1, D.2, D.3, E, E.1, E.2, E.3, E.4, E.5, E.6, E.7,\n" +
"F, F.1, F.2, F.3, F.4, F.5, F.6, G, G.1, G.2, G.3, G.4, G.5, G.6 Declared.\n\n" +

"Forecast Title: " + blank(title) + "\n" +
"Forecaster: " + blank(fore) + "\n\n" +

"Initial Question Framing\n" +
"Question:\n" + blank(q) + "\n\n" +
"Clarifications:\n" + blank(clar) + "\n\n" +
"Key Sources:\n" + blank(src) + "\n\n" +

"Refinement & Analysis\n" +
"Key Developments:\n" + blank(dev) + "\n\n" +
"Interpretation:\n" + blank(interp) + "\n\n" +

"Inside-Outside View Structuring\n" +
"Inside View:\n" + blank(inside) + "\n" +
"Outside View:\n" + blank(outside) + "\n\n" +

"Data Anomaly & Source Integrity Log\n" + blank(anom) + "\n\n" +

"// Structured Swarm Section — Applies only if forecast used multi-node reasoning\n" +
"// Mode: Structured Swarm (7 Nodes, MSCFT.MS-CMT applied internally)\n" +
"// Node Invocation Declaration: Nodes Used:\n" +
"- A, B, B.1, B.2, B.3, C, D, D.1, D.2, E, F, F.1, F.2, F.3, F.4, F.5, F.6.\n" +
"- G, G.1, G.2, G.3, G.4, G.5, G.6\n\n" +

"// Node A: Research Node — framing, question structure, source listing\n" +
"A.1 – Forecast Question\n" + blank(q) + "\n" +
"A.2 – Resolution Source\n[Insert official source here]\n" +
"A.3 – Forecast Window\n[Insert window]\n" +
"A.4 – Source Protocol Indexing\n" +
"A.4.a – Legal or Policy Framework Referenced\n" +
"A.4.b – Organizational or System-Level Constraints\n" +
"A.4.c – Governance Reference (if applicable)\n\n" +

"// Node B: Analytical Node — probability estimate, reasoning\n" +
"B.1 – Known Drivers and Catalysts\n[Insert]\n" +
"B.2 – Limiting Factors\n[Insert]\n" +
"B.3 – Actor Incentives and Strategic Intent\n[Insert]\n" +
"B.4 – Historical Analogues or Relevant Models\n[Insert]\n" +
"B.5 – Risk Model Integration\n" +
"B.5.a – Expected Value or Risk Exposure Range\n[Insert]\n" +
"B.5.b – AI Agent Risk Modeling\n[Insert]\n\n" +

"// Node B.1: Multi-Step “Yes vs. No” Reflection Prompt (for binary questions only)\n" +
"// (1) Rephrase the forecast as a binary statement\n" +
"// (2) Argue Yes and No sides\n" +
"// (3) Aggregate and assign forecast percentage\n" +
"// (4) Re-evaluate for overconfidence\n\n" +

"// Node B.2: BIN Model Substructure (Bias, Information, Noise)\n" +
"Bias –\n[Insert]\n" +
"Information –\n[Insert]\n" +
"Noise –\n[Insert]\n\n" +

"// Node B.3: Uncertainty Quantification Method\n" +
"(1) Point estimate\n" +
"(2) 90% CI\n" +
"(3) Factors that widen/narrow range\n" +
"(4) Express noise/variance\n\n" +

"// Node C: Synthesis Node — applies MSCFT.MS-CMT logic\n" +
"C.1 – Scenario Buckets or Ranges\n[Insert]\n" +
"C.2 – Conditional Relationships Between Buckets\n[Insert]\n" +
"C.3 – AI Agent Taxonomy Alignment\n" +
"C.3.a – Agent Lifecycle Tag: Pilot / Departmental / Enterprise-Wide\n" +
"C.3.b – Governance Constraints and Deployment Stage\n" +
"C.4 – Final Forecast Summary\n[Insert]\n" +
"C.5 – Rationale for Probability Distribution\n[Insert]\n" +
"C.6 – Forecast Caveats and Error Pathways\n[Insert]\n\n" +

"// Node D: Interpretation Node — Markov chain, entropy, or KL divergence\n" +
"D.1 – Entropy or Volatility Classification\n[Insert]\n" +
"D.2 – Markov Memory or Decay Factors\n[Insert]\n" +
"D.3 – KL Divergence from Historical Baseline\n[Insert]\n" +
"D.4 – Edge Case Divergence and Rare Events\n[Insert]\n" +
"D.5 – Optional: Human Analyst Override\n[Insert]\n\n" +

"// Node D.1 Entropy Interpretation — H(p) = –∑ p log p\n" +
"// Node D.2 Optional Symbolic Logic: Stack, Trie, Tree, Graph\n\n" +

"// Node E: Time Series Modeling Node\n" +
"E.1 – Anchor Point Identification\n[Insert]\n" +
"E.2 – Time Lag or Delay Window\n[Insert]\n" +
"E.3 – Forecast Window Resolution Points\n[Insert]\n" +
"E.4 – Time Series Feature Commentary (ARIMA, rolling average, etc.)\n[Insert]\n" +
"E.5 – ETS\n[Insert]\n" +
"E.6 – Fourier series\n[Insert]\n" +
"E.7 – Spectral entropy\n[Insert]\n\n" +

"// Node F: Retrieval-Augmented Generation (RAG) Node\n" +
"F.1 – Objective of Retrieval\n[Insert]\n" +
"F.2 – Source Landscape and Corpus Overview\n[Insert]\n" +
"F.3 – Relevance Mapping to Forecast Scope\n[Insert]\n" +
"F.4 – Retrieval Scope Boundaries and Guardrails\n" +
"F.4.a – Domain Constraints or Index Sharding\n[Insert]\n" +
"F.4.b – Time-Bound Access or Context Filters\n[Insert]\n" +
"F.4.c – Governance-Specific Retrieval Guardrails\n[Insert]\n" +
"F.5 – Impact on Forecast Validity\n[Insert]\n" +
"F.6 – Human-in-the-Loop Review and Injection Mitigation\n[Insert]\n" +
"F.6.a - For platforms like Metaculus with auto-withdrawal functionality, forecasters must re-affirm or update forecasts before the auto-withdrawal threshold (typically 10% of question lifetime) to maintain scoring integrity and avoid invalidation of stale forecasts.\n\n" +

"// Node G: Meta-Curation and Data Integrity Node\n" +
"G.1 – Source Provenance and Input Traceability\n[Insert]\n" +
"G.2 – Tool Use Disclosure and Agent Declaration\n[Insert]\n" +
"G.3 – Role Assignment and Input Segmentation\n[Insert]\n" +
"G.4 – Adversarial or Redundant Forecast Resolution\n[Insert]\n" +
"G.5 – Agent Execution Log and Governance Tracking\n[Insert]\n" +
"G.6 – Final Integrity Verification\n[Insert]\n\n" +

"// Optional Node G.7 – Governance and Compliance Declaration\n" +
"G.7.a – Framework Compliance\n[Insert]\n" +
"G.7.b – Versioning and Role Alignment\n[Insert]\n" +
"G.7.c – Audit Log Availability\n\n" +

"Probability Allocation\n" +
"Yes: [" + pct(yesp) + "]%\n" +
"No:  [" + pct(nop)  + "]%\n\n" +

"// BIN Model Substructure (Bias, Information, Noise)\n" +
"Bias –\n[Describe]\n" +
"Information –\n[Assess]\n" +
"Noise –\n[Identify]\n\n" +

"Final Forecast Summary\n" +
"Forecast:\n[Summarize most likely outcome and top bucket(s)]\n\n" +
"Rationale:\n[Explain distribution weighting]\n\n" +
"Why Might You Be Wrong?\n" +
"1. [Error path #1]\n" +
"2. [Error path #2]\n" +
"3. [Error path #3]\n";

    $('output').value = txt;
  }

  $('gen').addEventListener('click', build);

  $('copy').addEventListener('click', function(){
    if (!$('output').value.trim()) build();
    navigator.clipboard.writeText($('output').value).then(function(){
      alert("Copied to clipboard.");
    }, function(){
      alert("Copy failed. Select the text and press Ctrl+C.");
    });
  });

  $('download').addEventListener('click', function(){
    if (!$('output').value.trim()) build();
    const blob = new Blob([$('output').value], { type: "text/plain" });
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "forecast.txt";
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(a.href);
  });
})();
</script>
</body>
</html>
